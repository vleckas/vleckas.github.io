<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Outdoor Activities</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>  
<h1></h1>US City: <input type="text" id="location-input" style='width:200px;' /> 
<input type='button' class="search" class='location-search' value="get activities" /></h1>

<div id="search_title"></div>
<div id="trail_api_result"></div>
<script type="text/javascript">
$(function(){
    $('.search').on('click', function(event){
        get_trails();
    });
    function get_trails (){
     location_value = $('#location-input').val();
     place_array = [];      
    $('#trail_api_result').html("<h4>Loading an awesome list of of outdoor activities...</h4>");
    $('#search_title').html('<h2>Outdoor Activities Near ' + location_value + '</h2><ul>');
            $.getJSON('https://outdoor-data-api.herokuapp.com/api.json?api_key=4016165acc967a9800153c77a3528d83&q[city_cont]='+location_value+'&radius=15&callback=?', function(data) {         
                $('#trail_api_result').empty();
                $.each(data.places, function() {
                    place = this; 
                    activity_links = [];
                    $.each(place.activities, function(){    
                        activity = this;
                        activity_links.push("<a href='"+activity.url+"'>"+activity.activity_type_name+"</a>");
                    });
                    
                    if (activity_links.length > 0){$('#trail_api_result').append("<li>"+ place.name + " ["+activity_links.join(", ")+"]</li>");}
                });
            });
        }
});
    </script>
</body>
</html>
