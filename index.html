<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>Photos [TrailAPI]</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>	
	US State: <input type="text" id="location-input" /> <input type='button' class="search" class='location-search' value="get photos" />
	<div id="search_title"></div>
	<div id="trail_api_result"></div>
	<script type="text/javascript">
		$(function(){
			$('.search').on('click', function(event){
				get_photos();
			});
			function get_photos (){
				 location_value = $('#location-input').val();
				 place_array = [];		
				$('#trail_api_result').html("<h4>Loading results...</h4>");
				$('#search_title').html('<h2>' + location_value + ' outdoor photos</h2>');
				$.getJSON('https://outdoor-data-api.herokuapp.com/api.json?api_key=4016165acc967a9800153c77a3528d83&q[state_cont]='+location_value+'&callback=?', function(data) {
					$('#trail_api_result').empty();
					$.each(data.places, function() {
						place = this; 
						activity_links = [];
						$.each(place.activities, function(){	
							activity = this;
							if (activity.thumbnail != null){activity_links.push("<a href='"+activity.url+"' title='"+activity.name+"'><img src='" + activity.thumbnail + "' style='max-width: 300px; max-height: 300px;' /></a>");}
						});
						
						if (activity_links.length > 0){$('#trail_api_result').append("<div style='height: 100px; width: 100px; overflow: hidden; float: left;'>" +activity_links.join(", ")+"</div>");}
					});
				});
			}
		});
	</script>
</body>
</html>

